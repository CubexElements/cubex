<link rel="import" href="../../polymer/polymer.html"/>
<link rel="import" href="../../iron-flex-layout/iron-flex-layout.html"/>
<link rel="import" href="fortifi-breadcrumb-item.html"/>

<dom-module id="fortifi-breadcrumb" attributes="crumbs">
  <template>
    <style>
      :host {
        @apply --layout-horizontal;
        padding: 0 24px;
        height: 60px;
        line-height: 60px;
        box-sizing: border-box;
        @apply --fortifi-breadcrumb-style;
      }

      :host ::slotted(fort-action) {
        margin: 10px 0 10px 10px;
        padding: 5px;
      }

      #home fort-icon {
        padding: 0;
        margin-top: 16px;
      }

      .stretch {
        @apply --layout-flex-auto;
      }
    </style>

    <app-location route="{{route}}"></app-location>
    <app-route route="{{route}}" pattern="/:org" data="{{routeData}}"></app-route>

    <fortifi-breadcrumb-item id="home" href="/[[routeData.org]]">
      <fort-icon icon="icons:home"></fort-icon>
    </fortifi-breadcrumb-item>
    <template id="crumbList" is="dom-repeat" items="[[crumbs]]">
      <fortifi-breadcrumb-item href="/[[_trimPath(item.Url)]]">
        [[item.Title]]
      </fortifi-breadcrumb-item>
    </template>
    <div class="stretch"></div>
    <slot name="actions"></slot>
  </template>

  <script>
    Polymer(
      {
        is:         'fortifi-breadcrumb',
        properties: {
          crumbs: {type: Array, value: []}
        },
        _trimPath:  function (path)
                    {
                      return path.replace(/^\/+/, '');
                    }
      }
    );
  </script>
</dom-module>
