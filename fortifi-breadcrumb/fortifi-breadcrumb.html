<link rel="import" href="../../polymer/polymer.html"/>
<link rel="import" href="../../iron-flex-layout/iron-flex-layout.html"/>
<link rel="import" href="fortifi-breadcrumb-item.html"/>
<link rel="import" href="../fortifi-category/fortifi-category.html"/>
<link rel="import" href="../fortifi-repath/fortifi-repath.html">

<dom-module id="fortifi-breadcrumb" attributes="crumbs">
  <template>
    <style>
      :host {
        @apply --layout-horizontal;
        padding: 0 24px;
        height: 60px;
        line-height: 60px;
        box-sizing: border-box;
        @apply --fortifi-breadcrumb-style;
      }

      :host ::slotted(fort-action) {
        margin: 10px 0 10px 10px;
        padding: 5px;
      }

      #home fort-icon {
        padding: 0;
        margin-top: 21px;
      }

      .stretch {
        @apply --layout-flex-auto;
      }
    </style>

    <fortifi-repath in="/" gaid="" out="{{orgPath}}"></fortifi-repath>
    <fortifi-breadcrumb-item id="home" href="[[orgPath]]">
      <fort-icon icon="icons:home" size="16"></fort-icon>
    </fortifi-breadcrumb-item>

    <template is="dom-if" if="[[category]]">
      <fortifi-repath in="/[[category]]" gaid="" out="{{catPath}}"></fortifi-repath>
      <fortifi-breadcrumb-item id="category" href="[[catPath]]">
        <fortifi-category key="[[category]]" short></fortifi-category>
      </fortifi-breadcrumb-item>
    </template>

    <template is="dom-repeat" items="[[crumbs]]">
      <fortifi-breadcrumb-item href="[[item.Url]]">[[item.Title]]</fortifi-breadcrumb-item>
    </template>

    <div class="stretch"></div>

    <slot name="actions"></slot>
  </template>

  <script>
    Polymer(
      {
        is:         'fortifi-breadcrumb',
        properties: {
          crumbs:   {type: Array, value: function () {return [];}},
          category: {type: String}
        }
      }
    );
  </script>
</dom-module>
