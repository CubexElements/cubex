<link rel="import" href="../../polymer/polymer.html"/>
<link rel="import" href="../../iron-flex-layout/iron-flex-layout.html"/>
<link rel="import" href="fortifi-breadcrumb-item.html"/>

<dom-module id="fortifi-breadcrumb" attributes="crumbs">
  <template>
    <style>
      :host {
        @apply --layout-horizontal;
        padding: 0 24px;
        height: 60px;
        line-height: 60px;
        box-sizing: border-box;
        @apply --fortifi-breadcrumb-style;
      }

      :host ::slotted(fort-action) {
        margin: 10px 0 10px 10px;
        padding: 5px;
        height: 40px;
        width: 40px;
      }

      .left-column {
        @apply --layout-start;
      }

      .right-column {
        @apply --layout-flex-auto;
        text-align: right;
      }
    </style>

    <app-location route="{{route}}"></app-location>
    <app-route route="{{route}}" pattern="/:org" data="{{routeData}}"></app-route>

    <div class="left-column">
      <fortifi-breadcrumb-item href="/[[routeData.org]]">Home</fortifi-breadcrumb-item>
      <template id="crumbList" is="dom-repeat" items="[[crumbs]]">
        <fortifi-breadcrumb-item href="/[[routeData.org]]/[[_trimPath(item.Url)]]">
          [[item.Title]]
        </fortifi-breadcrumb-item>
      </template>
    </div>
    <div class="right-column">
      <slot name="actions"></slot>
    </div>
  </template>

  <script>
    Polymer(
      {
        is:         'fortifi-breadcrumb',
        properties: {
          crumbs: {type: Array, value: []}
        },
        _trimPath:  function (path)
                    {
                      return path.replace(/^\/+/, '');
                    }
      }
    );
  </script>
</dom-module>
