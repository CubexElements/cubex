<link href="../../polymer/polymer.html" rel="import">
<link href="../../fort-behavior/fort-service-behavior.html" rel="import">

<dom-module id="fortifi-app-definition" attributes="vendor app app-data">
  <template>
    <fort-resource auto url="[[_url]]" data="{{appData}}" headers="{}"></fort-resource>
  </template>
  <script>
    Polymer(
      {
        is:         'fortifi-app-definition',
        properties: {
          vendor:  {type: String},
          app:     {type: String},
          appData: {type: Object, notify: true},
          _url:    {type: String}
        },
        observers:  ['_updateUrl(vendor,app)'],

        _updateUrl: function ()
                    {
                      var url;
                      if(this.vendor && this.app)
                      {
                        url = '//' + this.getServiceHost('cdn') + '/_apps/' + this.vendor + '/' + this.app + '/definition.json';
                      }

                      if(this._url !== url)
                      {
                        this._url = url;
                      }
                    },

        behaviors: [Polymer.FortServiceBehavior]
      }
    );
  </script>
</dom-module>
