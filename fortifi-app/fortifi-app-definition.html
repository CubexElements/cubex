<link href="../../polymer/polymer.html" rel="import">
<link href="../../fort-behavior/fort-service-behavior.html" rel="import">

<dom-module id="fortifi-app-definition" attributes="gaid app-data">
  <template>
    <fort-resource auto url="[[_url]]" data="{{appData}}"></fort-resource>
  </template>
  <script>
    Polymer(
      {
        is:         'fortifi-app-definition',
        properties: {
          gaid:    {type: String},
          appData: {type: Object, notify: true},
          _url:    {type: String}
        },
        observers:  ['_updateUrl(gaid)'],

        _updateUrl: function ()
                    {
                      var url = null;
                      if(this.gaid && this.gaid !== '/')
                      {
                        url = '//' + this.getServiceHost('cdn') + '/_apps/' + this.gaid + '/definition.json';
                      }

                      if(this._url !== url)
                      {
                        this._url = url;
                      }
                    },

        behaviors: [Polymer.FortServiceBehavior]
      }
    );
  </script>
</dom-module>
